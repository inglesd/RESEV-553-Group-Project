---
title: "Script from class 2-8-2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

# Functions ####

# <- assigning
# %/% pipe data into a function
# select() rows
# filter() columns
# rename() variable
# mutate() transform data into new columns (split gender into m and f)
# ifelse() logic statement (if gender = m, then 1)
# group_by() group by one or more variable (avg score for men out of gender)
# summary() summary of descriptive statistics 

# Example Data Information ####

# How does education predict salary across social identity groups?

# census data
#     race, gender, age, education level, salary

# Open and Rename data ####
```{r}
library(haven)
prgusap1_puf <- read_sas("prgusap1_puf.sas7bdat", 
    NULL)
View(prgusap1_puf)

df <- prgusap1_puf
```

#cut out extra variables and rename columns####
```{r}
#ls(df) can show us the variables 
#select(var1,var2)
#rename(new name=old name)

df_small <- df %>%
  select(RACETHN_5CAT, REGION_US, EDCAT8, J_Q09USX) %>%
  rename(Race = RACETHN_5CAT,
         Region = REGION_US,
         EDU = EDCAT8,
         Income = J_Q09USX)
```

filter income responses
```{r}
#filter()

 # df_income <- df_small %>%
 # filter(Income >=1,
 #       Income <=11)
 ```

identify which incomes to include
```{r}
#want at least 20
#table() will give us a count of race

# table(df_income$Income)
# 
# df_income <- df_income %>%
#   mutate(Income_2 = ifelse(Income==1,"1-9,999",
#                            ifelse(Income==2, "10,000-19,999",
#                                   ifelse(Income==3,"20,000-29,999",
#                                   ifelse(Income==4, "20,000-29,999",
#                                   ifelse(Income==5, "30,000-49,999",
#                                   ifelse(Income==6, "50,000-59,999",
#                                   ifelse(Income==7, "60,000-74,999",
#                                   ifelse(Income==8, "75,000-99,999",
#                                   ifelse(Income==9, "100,000-149,999",
#                                   ifelse(Income==10, "150,000 or more",
#                                   ifelse(Income==11, "No Income","Other Income"))))))))))))

```

clean income more
```{r}
#mutate(ifelse()) with | (or) statement

df_income2 <- df_small %>%
  mutate(Income=ifelse(Income== 1 | Income==2, "1-19,999",
                       ifelse(Income== 3 | Income==4, "20,000-29,999",
                        ifelse(Income== 5 | Income==6, "30,000-59,999",
                        ifelse(Income== 7, "60,000-74,999",
                        ifelse(Income== 8, "75,000- 99,999",
                               ifelse(Income== 9, "100,000-149,999",
                                  ifelse(Income== 10, "150,000 or more",
                                         ifelse(Income== 11,"No Income", "Other Income")))))))))
```

```{r}

```


descriptive stats- continuous
```{r}
#group_by() %>% summarize ()
#write.csv(desc_stat,'desc_stat.csv')

# desc_stat <- df_income2 %>% group_by(Region,Income,Race) %>%
#   summarize(N=n(),
#             mean=mean(Income),
#             SD=sd(Income))
# 
# write.csv(desc_state, "desc_stat.csv")
```

plot descriptives
```{r}
# df_income#Edu <- factor (df_income)
# 
# ggplot(df_income,aes(x=Income, y=Region)) +
#   geom_boxplot() +
#   scale_y_continuous(trans='log2', limits=c(1000,2000000))
# facet_wrap(~Region)
# 
# #save the last plot you made####
# 
# ggsave("myplot.png", width=8, height=3)
```


```{r}
#EDU- 1&2 primary, 3& 4 secondary, 6- bachelor, 7- master, 5&8 Professional/PhD, NA- not stated
```{r}